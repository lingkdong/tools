(function(t){"object"===typeof exports&&"undefined"!==typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).markdownitFootnote=t()})(function(){return function v(m,p,q){function r(l,n){if(!p[l]){if(!m[l]){var b="function"==typeof require&&require;if(!n&&b)return b(l,!0);if(s)return s(l,!0);b=Error("Cannot find module '"+l+"'");throw b.code="MODULE_NOT_FOUND",b;
}b=p[l]={exports:{}};m[l][0].call(b.exports,function(b){var a=m[l][1][b];return r(a?a:b)},b,b.exports,v,m,p,q)}return p[l].exports}for(var s="function"==typeof require&&require,n=0;n<q.length;n++)r(q[n]);return r}({1:[function(v,m,p){function q(b,h){var a=Number(b[h].meta.id+1).toString(),u="fnref"+a;0<b[h].meta.subId&&(u+=":"+b[h].meta.subId);return'\x3csup class\x3d"footnote-ref"\x3e\x3ca href\x3d"#fn'+a+'" id\x3d"'+u+'"\x3e['+a+"]\x3c/a\x3e\x3c/sup\x3e"}function r(b,h,a){return(a.xhtmlOut?'\x3chr class\x3d"footnotes-sep" /\x3e\n':
'\x3chr class\x3d"footnotes-sep"\x3e\n')+'\x3csection class\x3d"footnotes"\x3e\n\x3col class\x3d"footnotes-list"\x3e\n'}function s(){return"\x3c/ol\x3e\n\x3c/section\x3e\n"}function n(b,h){return'\x3cli id\x3d"fn'+Number(b[h].meta.id+1).toString()+'"  class\x3d"footnote-item"\x3e'}function l(){return"\x3c/li\x3e\n"}function w(b,h){var a="fnref"+Number(b[h].meta.id+1).toString();0<b[h].meta.subId&&(a+=":"+b[h].meta.subId);return' \x3ca href\x3d"#'+a+'" class\x3d"footnote-backref"\x3eâ†©\x3c/a\x3e'}m.exports=
function(b){var h=b.helpers.parseLinkLabel;b.renderer.rules.footnote_ref=q;b.renderer.rules.footnote_block_open=r;b.renderer.rules.footnote_block_close=s;b.renderer.rules.footnote_open=n;b.renderer.rules.footnote_close=l;b.renderer.rules.footnote_anchor=w;b.block.ruler.before("reference","footnote_def",function(a,b,g,d){var c,k,e;c=a.bMarks[b]+a.tShift[b];k=a.eMarks[b];if(c+4>k||91!==a.src.charCodeAt(c)||94!==a.src.charCodeAt(c+1))return!1;for(e=c+2;e<k;e++){if(32===a.src.charCodeAt(e))return!1;if(93===
a.src.charCodeAt(e))break}if(e===c+2||e+1>=k||58!==a.src.charCodeAt(++e))return!1;if(d)return!0;e++;a.env.footnotes||(a.env.footnotes={});a.env.footnotes.refs||(a.env.footnotes.refs={});d=a.src.slice(c+2,e-2);a.env.footnotes.refs[":"+d]=-1;c=new a.Token("footnote_reference_open","",1);c.meta={label:d};c.level=a.level++;a.tokens.push(c);d=a.bMarks[b];c=a.tShift[b];k=a.parentType;a.tShift[b]=a.skipSpaces(e)-e;a.bMarks[b]=e;a.blkIndent+=4;a.parentType="footnote";a.tShift[b]<a.blkIndent&&(a.tShift[b]+=
a.blkIndent,a.bMarks[b]-=a.blkIndent);a.md.block.tokenize(a,b,g,!0);a.parentType=k;a.blkIndent-=4;a.tShift[b]=c;a.bMarks[b]=d;c=new a.Token("footnote_reference_close","",-1);c.level=--a.level;a.tokens.push(c);return!0},{alt:["paragraph","reference"]});b.inline.ruler.after("image","footnote_inline",function(a,b){var g,d,c,k=a.posMax;d=a.pos;if(d+2>=k||94!==a.src.charCodeAt(d)||91!==a.src.charCodeAt(d+1))return!1;g=d+2;d=h(a,d+1);if(0>d)return!1;b||(a.env.footnotes||(a.env.footnotes={}),a.env.footnotes.list||
(a.env.footnotes.list=[]),c=a.env.footnotes.list.length,a.pos=g,a.posMax=d,g=a.push("footnote_ref","",0),g.meta={id:c},g=a.tokens.length,a.md.inline.tokenize(a),a.env.footnotes.list[c]={tokens:a.tokens.splice(g)});a.pos=d+1;a.posMax=k;return!0});b.inline.ruler.after("footnote_inline","footnote_ref",function(a,b){var g,d,c,k,e=a.posMax;c=a.pos;if(c+3>e||!a.env.footnotes||!a.env.footnotes.refs||91!==a.src.charCodeAt(c)||94!==a.src.charCodeAt(c+1))return!1;for(d=c+2;d<e;d++){if(32===a.src.charCodeAt(d)||
10===a.src.charCodeAt(d))return!1;if(93===a.src.charCodeAt(d))break}if(d===c+2||d>=e)return!1;d++;g=a.src.slice(c+2,d-1);if("undefined"===typeof a.env.footnotes.refs[":"+g])return!1;b||(a.env.footnotes.list||(a.env.footnotes.list=[]),0>a.env.footnotes.refs[":"+g]?(c=a.env.footnotes.list.length,a.env.footnotes.list[c]={label:g,count:0},a.env.footnotes.refs[":"+g]=c):c=a.env.footnotes.refs[":"+g],g=a.env.footnotes.list[c].count,a.env.footnotes.list[c].count++,k=a.push("footnote_ref","",0),k.meta={id:c,
subId:g});a.pos=d;a.posMax=e;return!0});b.core.ruler.after("inline","footnote_tail",function(a){var b,g,d,c,k,e,f,h,l,n,m=!1,p={};if(a.env.footnotes&&(a.tokens=a.tokens.filter(function(a){if("footnote_reference_open"===a.type)return m=!0,l=[],n=a.meta.label,!1;if("footnote_reference_close"===a.type)return m=!1,p[":"+n]=l,!1;m&&l.push(a);return!m}),a.env.footnotes.list)){e=a.env.footnotes.list;f=new a.Token("footnote_block_open","",1);a.tokens.push(f);b=0;for(g=e.length;b<g;b++){f=new a.Token("footnote_open",
"",1);f.meta={id:b};a.tokens.push(f);e[b].tokens?(h=[],f=new a.Token("paragraph_open","p",1),f.block=!0,h.push(f),f=new a.Token("inline","",0),f.children=e[b].tokens,f.content="",h.push(f),f=new a.Token("paragraph_close","p",-1),f.block=!0,h.push(f)):e[b].label&&(h=p[":"+e[b].label]);a.tokens=a.tokens.concat(h);k="paragraph_close"===a.tokens[a.tokens.length-1].type?a.tokens.pop():null;c=0<e[b].count?e[b].count:1;for(d=0;d<c;d++)f=new a.Token("footnote_anchor","",0),f.meta={id:b,subId:d},a.tokens.push(f);
k&&a.tokens.push(k);f=new a.Token("footnote_close","",-1);a.tokens.push(f)}f=new a.Token("footnote_block_close","",-1);a.tokens.push(f)}})}},{}]},{},[1])(1)});