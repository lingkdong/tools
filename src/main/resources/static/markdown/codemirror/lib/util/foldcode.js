CodeMirror.tagRangeFinder=function(g,h,n){for(var l=RegExp("^[A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*"),b=g.getLine(h),a=!1,f=null,c=0;!a;){c=b.indexOf("\x3c",
c);if(-1==c)return;if(c+1<b.length&&"/"==b[c+1])c++;else if(b.substr(c+1).match(l)){var d=b.indexOf("\x3e",c+1);if(-1==d){for(var a=h+1,e=!1,d=g.lineCount();a<d&&!e;){var k=g.getLine(a),m=k.indexOf("\x3e");if(-1!=m&&(e=!0,k=k.lastIndexOf("/",m),-1!=k&&k<m&&(m=b.substr(k,m-k+1),!m.match(/\/\s*\>/))))return!0===n&&a++,a;a++}a=!0}else e=b.lastIndexOf("/",d),-1==e?a=!0:(m=b.substr(e,d-e+1),m.match(/\/\s*\>/)||(a=!0));a&&((f=b.substr(c+1).match(l))?(f=f[0],-1!=b.indexOf("\x3c/"+f+"\x3e",c)&&(a=!1)):a=
!1);a||c++}else c++}if(a)for(l=RegExp("(\\\x3c\\/"+f+"\\\x3e)|(\\\x3c"+f+"\\\x3e)|(\\\x3c"+f+"\\s)|(\\\x3c"+f+"$)","g"),f="\x3c/"+f+"\x3e",c=1,a=h+1,d=g.lineCount();a<d;){b=g.getLine(a);if(h=b.match(l))for(b=0;b<h.length;b++)if(h[b]==f?c--:c++,!c)return!0===n&&a++,a;a++}};
CodeMirror.braceRangeFinder=function(g,h,n){for(var l=g.getLine(h),b=l.length,a,f;;){b=l.lastIndexOf("{",b);if(0>b)break;f=g.getTokenAt({line:h,ch:b}).className;if(!/^(comment|string)/.test(f)){a=b;break}b-=1}if(!(null==a||l.lastIndexOf("}")>a)){l=1;a=g.lineCount();var c,b=h+1;a:for(;b<a;++b)for(var d=g.getLine(b),e=0;;){var k=d.indexOf("{",e),e=d.indexOf("}",e);0>k&&(k=d.length);0>e&&(e=d.length);e=Math.min(k,e);if(e==d.length)break;if(g.getTokenAt({line:b,ch:e+1}).className==f)if(e==k)++l;else if(!--l){c=
b;break a}++e}if(null!=c&&c!=h+1)return!0===n&&c++,c}};CodeMirror.indentRangeFinder=function(g,h){for(var n=g.getOption("tabSize"),l=g.getLineHandle(h).indentation(n),b,a=h+1,f=g.lineCount();a<f;++a){var c=g.getLineHandle(a);if(!/^\s*$/.test(c.text)){if(c.indentation(n)<=l)break;b=a}}return b?b+1:null};
CodeMirror.newFoldFunction=function(g,h,n){function l(b,c){for(var d=0;d<a.length;++d){var e=b.lineInfo(a[d].start);if(!e)a.splice(d--,1);else if(e.line==c)return{pos:d,region:a[d]}}}function b(b,a){b.clearMarker(a.start);for(var d=0;d<a.hidden.length;++d)b.showLine(a.hidden[d])}var a=[];null==h&&(h='\x3cdiv style\x3d"position: absolute; left: 2px; color:#600"\x3e\x26#x25bc;\x3c/div\x3e%N%');return function(f,c){f.operation(function(){var d=l(f,c);if(d)a.splice(d.pos,1),b(f,d.region);else{var e=g(f,
c,n);if(null!=e){for(var d=[],k=c+1;k<e;++k){var m=f.hideLine(k);m&&d.push(m)}var e=f.setMarker(c,h),p={start:e,hidden:d};f.onDeleteLine(e,function(){b(f,p)});a.push(p)}}})}};