(function(){function h(a,g){if(a.indexOf)return a.indexOf(g);for(var b=0,f=a.length;b<f;++b)if(a[b]==g)return b;return-1}CodeMirror.defaults.closeTagEnabled=!0;CodeMirror.defaults.closeTagIndent="applet blockquote body button div dl fieldset form frameset h1 h2 h3 h4 h5 h6 head html iframe layer legend object ol p select table ul".split(" ");CodeMirror.defaults.closeTagVoid="area base br col command embed hr img input keygen link meta param source track wbr".split(" ");CodeMirror.defineExtension("closeTag",
function(a,g,b,f){if(!a.getOption("closeTagEnabled"))throw CodeMirror.Pass;var c=a.getCursor(),d=a.getTokenAt(c),e=CodeMirror.innerMode(a.getMode(),d.state).state;if(e)if("\x3e"==g){g=e.type;if("tag"==d.className&&"closeTag"==g)throw CodeMirror.Pass;a.replaceSelection("\x3e");c={line:c.line,ch:c.ch+1};a.setCursor(c);d=a.getTokenAt(a.getCursor());e=CodeMirror.innerMode(a.getMode(),d.state).state;if(!e)throw CodeMirror.Pass;g=e.type;if("tag"==d.className&&"selfcloseTag"!=g){d=e.tagName;if(e=0<d.length)if(e=
d,"xml"==a.getOption("mode"))e=!0;else{if("undefined"==typeof f||null==f)f=a.getOption("closeTagVoid");f||(f=[]);e=-1==h(f,e.toLowerCase())}if(e){f=d;if("undefined"==typeof b||null==b||!0==b)b=a.getOption("closeTagIndent");b||(b=[]);-1!=h(b,f.toLowerCase())?(a.replaceSelection("\n\n\x3c/"+f+"\x3e","end"),a.indentLine(c.line+1),a.indentLine(c.line+2),a.setCursor({line:c.line+1,ch:a.getLine(c.line+1).length})):(a.replaceSelection("\x3c/"+f+"\x3e"),a.setCursor(c))}return}a.setSelection({line:c.line,
ch:c.ch-1},c);a.replaceSelection("")}else if("/"==g&&"tag"==d.className&&"\x3c"==d.string&&(d=(b=e.context)?b.tagName:"",0<d.length)){b=c;c=d;a.replaceSelection("/"+c+"\x3e");a.setCursor({line:b.line,ch:b.ch+c.length+2});return}throw CodeMirror.Pass;})})();