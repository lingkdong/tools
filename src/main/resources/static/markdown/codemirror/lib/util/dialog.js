(function(){function m(g,h){var a=g.getWrapperElement(),a=a.insertBefore(document.createElement("div"),a.firstChild);a.className="CodeMirror-dialog";a.innerHTML="\x3cdiv\x3e"+h+"\x3c/div\x3e";return a}CodeMirror.defineExtension("openDialog",function(g,h){function a(){f||(f=!0,c.parentNode.removeChild(c))}var c=m(this,g),f=!1,k=this,d=c.getElementsByTagName("input")[0],e;if(d)CodeMirror.connect(d,"keydown",function(b){if(13==b.keyCode||27==b.keyCode)CodeMirror.e_stop(b),a(),k.focus(),13==b.keyCode&&
h(d.value)}),d.focus(),CodeMirror.connect(d,"blur",a);else if(e=c.getElementsByTagName("button")[0])CodeMirror.connect(e,"click",function(){a();k.focus()}),e.focus(),CodeMirror.connect(e,"blur",a);return a});CodeMirror.defineExtension("openConfirm",function(g,h){function a(){k||(k=!0,c.parentNode.removeChild(c),d.focus())}var c=m(this,g),f=c.getElementsByTagName("button"),k=!1,d=this,e=1;f[0].focus();for(var b=0;b<f.length;++b){var l=f[b];(function(b){CodeMirror.connect(l,"click",function(c){CodeMirror.e_preventDefault(c);
a();b&&b(d)})})(h[b]);CodeMirror.connect(l,"blur",function(){--e;setTimeout(function(){0>=e&&a()},200)});CodeMirror.connect(l,"focus",function(){++e})}})})();